<!DOCTYPE html>
<html>
<head>
    <title>Map of Existing Panoramas</title>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
<h3>Existing Panoramas</h3>
All existing panoramas are displayed on the map below.
Click on a point to see panorama data and to edit the panorama.
<div id="map"></div>
<script>

    var jsonPanos;

    function initMap() {

        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('GET', '/getAllPanos', false);
        xobj.send();
        jsonPanos = JSON.parse(xobj.responseText);

        var markers = jsonPanos.map(function (panorama, i) {
            return new google.maps.Marker({
                position: panorama,
                label: '' + (i + 1)
            })
        });

        var uluru = {lat: jsonPanos[0].lat, lng: jsonPanos[0].lng};
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: uluru
        });

        var markerCluster = new MarkerClusterer(map, markers,
            {imagePath: 'GoogleResources/m'});
    }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBUTckKb884QoQ1qaan9dxI-I1jx70Amb8&callback=initMap">
</script>
<script src="GoogleResources/markerclusterer.js">
</script>
</body>
</html>